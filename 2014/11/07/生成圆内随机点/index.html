<!DOCTYPE html><html><head><meta charset="utf-8"><title>生成圆内随机点 | Andimeo&#39;s Blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="今天小伙伴去网易游戏面试。有一个题目是要求在直径为1的圆内随机生成若干个点。 他给出的算法是在边长为1的圆外接正方形内随机生成一个点，如果在圆内即采用，否则抛弃。面试官说要求一次成功。 于是问题就来了。 一个直观的想法是采用极坐标表示圆内的任意一点，在$0-r$的范围内生成半径长度，在$0-2\pi$的范围内生成角度。那我们看一下用Mathematica模拟生成的这些点是不是符合直觉呢。 1234"><meta property="og:type" content="article"><meta property="og:title" content="生成圆内随机点"><meta property="og:url" content="http://andimeo.us.kg/2014/11/07/%E7%94%9F%E6%88%90%E5%9C%86%E5%86%85%E9%9A%8F%E6%9C%BA%E7%82%B9/index.html"><meta property="og:site_name" content="Andimeo&#39;s Blog"><meta property="og:description" content="今天小伙伴去网易游戏面试。有一个题目是要求在直径为1的圆内随机生成若干个点。 他给出的算法是在边长为1的圆外接正方形内随机生成一个点，如果在圆内即采用，否则抛弃。面试官说要求一次成功。 于是问题就来了。 一个直观的想法是采用极坐标表示圆内的任意一点，在$0-r$的范围内生成半径长度，在$0-2\pi$的范围内生成角度。那我们看一下用Mathematica模拟生成的这些点是不是符合直觉呢。 1234"><meta property="og:locale"><meta property="og:image" content="http://andimeo.us.kg/img/mathematica1.jpg"><meta property="og:image" content="http://andimeo.us.kg/img/mathematica2.jpg"><meta property="og:image" content="http://andimeo.us.kg/img/mathematica3.jpg"><meta property="article:published_time" content="2014-11-07T09:10:00.000Z"><meta property="article:modified_time" content="2024-09-07T07:25:33.406Z"><meta property="article:author" content="Andimeo"><meta property="article:tag" content="Mathematics"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://andimeo.us.kg/img/mathematica1.jpg"><link rel="alternative" href="/atom.xml" title="Andimeo&#39;s Blog" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link href="http://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/style.css"><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--><meta name="generator" content="Hexo 7.3.0"></head><body><div id="container"><div id="wrap"><nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container"><button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">Andimeo&#39;s Blog</a><div class="collapse navbar-collapse nav-menu"><ul class="nav navbar-nav"><li><a href="/archives"><i class="fa fa-archive"></i> Archives</a></li><li><a href="/categories"><i class="fa fa-folder"></i> Categories</a></li><li><a href="/tags"><i class="fa fa-tags"></i> Tags</a></li><li><a href="/about"><i class="fa fa-user"></i> About</a></li></ul><ul class="nav navbar-nav navbar-right"><li><a id="rss-link" href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a></li></ul></div></div></nav><div class="clearfix"></div><div id="content" class="container"><div class="page-header-wrapper"><!--[if lt IE 9]><div class="alert alert-warning alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><strong>提示:</strong>您的浏览器版本太低了,建议升级到 <strong><a target="_blank" rel="noopener" href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" title="IE9">IE9</a></strong> 以上,本站使用<a target="_blank" rel="noopener" href="https://www.google.com/intl/zh-CN/chrome/">Chrome浏览器</a>可以获得最好的显示效果.</div><![endif]--><div class="page-header"><h1 class="title">生成圆内随机点</h1></div></div><section id="main"><article id="post-cm0s3y3em001fmgy7exny2d7g" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><div class="article-entry" itemprop="articleBody"><p>今天小伙伴去网易游戏面试。有一个题目是要求在直径为1的圆内随机生成若干个点。 他给出的算法是在边长为1的圆外接正方形内随机生成一个点，如果在圆内即采用，否则抛弃。面试官说要求一次成功。 于是问题就来了。</p><p>一个直观的想法是采用极坐标表示圆内的任意一点，在$0-r$的范围内生成半径长度，在$0-2\pi$的范围内生成角度。那我们看一下用Mathematica模拟生成的这些点是不是符合直觉呢。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125; </span><br><span class="line">r = 0.5;</span><br><span class="line">num = 500;</span><br><span class="line">tu[0] = ParametricPlot[&#123;r*Sin[u], r*Cos[u]&#125;, &#123;u, 0, 2 Pi&#125;];</span><br><span class="line">For[i = 1, i &lt;= num, i++, u = r*Random[];</span><br><span class="line">  v = 2 Pi*Random[];</span><br><span class="line">  tu[i] = ListPlot[&#123;&#123;u*Sin[v], u*Cos[v]&#125;&#125;];];</span><br><span class="line">Show[Table[tu[i], &#123;i, 0, num&#125;], Axes -&gt; None]</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><p><img src="/img/mathematica1.jpg" alt="mathematica1" title="mathematica1"></p><p>从图中可以看出，似乎圆中心部分的点比较密集，而圆外围的点则比较稀疏。我们不妨简单的分析一下。为了方便计算，我们将圆的半径设为1。那么如果我们选取一个点的时候，半径长度是均匀的，那么落在以$r$为半径的的圆内的概率就是$r$。假设现在我们有半径长度$r$和$2r$，那么落在面积为$\pi r^2$内的概率为r，落在面积为$4\pi r^2$内的概率为2r，两者相减可以知道，半径为$2r$的圆比半径为$r$的圆多出来的圆环面积为$3\pi r^2$，但是点落在其中的概率却和落在面积为$\pi r^2$的圆中一样。也就是说，越靠近圆心点越密集。</p><p>于是我们需要让$r$的生成概率与其对应的面积成正比，即首先根据$0-r^2$随机生成一个数，然后将这个数开平方作为半径长度。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125; </span><br><span class="line">r = 0.5;</span><br><span class="line">num = 500;</span><br><span class="line">tu[0] = ParametricPlot[&#123;r*Sin[u], r*Cos[u]&#125;, &#123;u, 0, 2 Pi&#125;];</span><br><span class="line">For[i = 1, i &lt;= num, i++, u = (r^2*Random[])^(1/2);</span><br><span class="line">  v = 2 Pi*Random[];</span><br><span class="line">  tu[i] = ListPlot[&#123;&#123;u*Sin[v], u*Cos[v]&#125;&#125;];];</span><br><span class="line">Show[Table[tu[i], &#123;i, 0, num&#125;], Axes -&gt; None]</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/mathematica2.jpg" alt="mathematica2" title="mathematica2"></p><p>这次的图应该与我们的结果相符。</p><p>另外还有一种拍脑袋的想法，那就是先生成x坐标，再生成y坐标。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125; </span><br><span class="line">r = 0.5;</span><br><span class="line">num = 500;</span><br><span class="line">tu[0] = ParametricPlot[&#123;r*Sin[u], r*Cos[u]&#125;, &#123;u, 0, 2 Pi&#125;];</span><br><span class="line">For[i = 1, i &lt;= num, i++,</span><br><span class="line">  u = 2 r * Random[] - r;</span><br><span class="line">  v = 2*(r^2 - u^2)^(1/2)*Random[] - (r^2 - u^2)^(1/2);</span><br><span class="line">  tu[i] = ListPlot[&#123;&#123;u, v&#125;&#125;];</span><br><span class="line">  ];</span><br><span class="line">Show[Table[tu[i], &#123;i, 0, num&#125;], Axes -&gt; None]</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/mathematica3.jpg" alt="mathematica3" title="mathematica3"></p><p>经过前面的分析，我们应该能轻松的发现这种生成方法，会使得圆两端的密度比中间高，因为我们首先是按照$x$来随机挑选的，而$x$与其对应的面积却不是线性关系。上图也印证了我们的想法。</p><p>其实这个题目是一个十分Trivial的题目，之所以记录在这里是因为，刚听到这个题目的时候也脱口而出了那种错误的方法。另外也记录一下自己学习Mathematica的脚步。</p></div></div></article><section id="comments"><div id="disqus_thread"></div><script>var disqus_config=function(){this.page.url="http://andimeo.us.kg/2014/11/07/%E7%94%9F%E6%88%90%E5%9C%86%E5%86%85%E9%9A%8F%E6%9C%BA%E7%82%B9/",this.page.identifier="8c507bdc-6ba7-11ef-80cf-1747159a1056"};!function(){var e=document,t=e.createElement("script");t.src="https://andimeo.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()</script><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></section></section><aside id="sidebar"><div class="widget-wrap center"><ul class="pagination"><li><a href="/2014/11/24/多线程写文件/" class="nav-prev">Prev</a></li><li><a data-url="http://andimeo.us.kg/2014/11/07/%E7%94%9F%E6%88%90%E5%9C%86%E5%86%85%E9%9A%8F%E6%9C%BA%E7%82%B9/" data-id="cm0s3y3em001fmgy7exny2d7g" data_title="生成圆内随机点" data_summary="今天小伙伴去网易游戏面试。有一个题目是要求在直径为1的圆内随机生成若干个点。
他给出的算法是在边长为1的圆外接正方形内随机生成一个点，如果在圆内即采用，否则抛弃。面..." class="article-share-link">Share</a></li><li><a href="/2014/08/23/Git工作模式/" class="nav-next">Next</a></li></ul></div><div class="widget-wrap"><div class="post-widget"><i class="fa fa-clock-o"></i> <time datetime="2014-11-07T09:10:00.000Z" itemprop="datePublished">2014-11-07</time></div></div><div class="widget-wrap"><div class="post-widget"><i class="fa fa-folder"></i> <a class="category-link" href="/categories/%E6%A6%82%E7%8E%87/">概率<span class="category-count">1</span></a></div></div><div class="widget-wrap"><div class="post-widget"><i class="fa fa-tags"></i> <a class="tag-none-link" href="/tags/Mathematics/" rel="tag">Mathematics<span class="tag-none-count">1</span></a></div></div></aside></div><footer id="footer"><div class="outer container"><div id="footer-info" class="inner"><a href="/">Andimeo&#39;s Blog</a> &copy; 2024 Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> and Theme by <a href="https://github.com/Andimeo/hexo-theme-nut" target="_blank">Nut</a></div></div></footer><a id="gotop" href="#"><i class="fa fa-chevron-up"></i></a></div><nav id="mobile-nav"><a href="[object Object]" class="mobile-nav-link">0</a> <a href="[object Object]" class="mobile-nav-link">1</a> <a href="[object Object]" class="mobile-nav-link">2</a> <a href="[object Object]" class="mobile-nav-link">3</a></nav><script src="/js/jquery.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/jquery.fitvids.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/script.js"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ 
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} 
});</script><script type="text/javascript" src="/js/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script id="dsq-count-scr" src="//andimeo.disqus.com/count.js" async></script></div></body></html>